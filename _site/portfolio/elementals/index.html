<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Elementals | Max Harris</title>
<meta name="description" content="An action platformer centered on spellcasting and magic">


  <meta name="author" content="Max Harris">
  
  <meta property="article:author" content="Max Harris">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Max Harris">
<meta property="og:title" content="Elementals">
<meta property="og:url" content="http://localhost:4000/portfolio/elementals/">


  <meta property="og:description" content="An action platformer centered on spellcasting and magic">



  <meta property="og:image" content="http://localhost:4000/assets/images/elementals/elementals-header-overlay-2-copy.jpg">





  <meta property="article:published_time" content="2024-08-01T17:52:07-04:00">






<link rel="canonical" href="http://localhost:4000/portfolio/elementals/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Max Harris",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Max Harris Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Max Harris
          <span class="site-subtitle">Game Developer</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/">Home</a>
            </li><li class="masthead__menu-item">
              <a href="/portfolio/">Portfolio</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay"
  style=" background-image: linear-gradient(rgba(0, 82, 19, 0.4), rgba(0, 82, 19, 0.4)), url('/assets/images/elementals/elementals-header-overlay-2-copy.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Elementals

        
      </h1>
      
        <p class="page__lead">An action platformer centered on spellcasting and magic
</p>
      
      


      
      
        <p>
        
          <a href="https://tyranicgoat.itch.io/elementals" class="btn btn--light-outline btn--large">Play Online</a>
        
          <a href="https://github.com/mharris382/Software-Engineering-Capstone" class="btn btn--light-outline btn--large">Github</a>
        
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      <h3>Role</h3>
      <p>Project Manager, Programmer, Game Designer</p>

      
    
      
      <h3>Project Information</h3>
      
      
    
      
      
      <p>Feb 2022 - May 2022</p>

      
    
      
      
      <p><strong>Engine:</strong> Unity</p>

      
    
      
      
      <p><strong>Language:</strong> C#</p>

      
    
      
      
      <p><strong>Tools:</strong></p>

      
    
      
      
      <p>Cinemachine plugin</p>

      
    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Elementals">
    <meta itemprop="description" content="An action platformer centered on spellcasting and magic">
    
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-far fa-list-alt"></i> Table of Contents</h4></header>
              <ul class="toc__menu"><li><a href="#concept">Concept</a></li><li><a href="#technical-highlights">Technical Highlights</a><ul><li><a href="#shared-data-component-pattern">Shared Data Component Pattern</a></li></ul></li><li><a href="#challenges-and-solutions">Challenges and Solutions</a></li><li><a href="#conclusion">Conclusion</a></li></ul>

            </nav>
          </aside>
        
        <p>This was my senior capstone project. I had made a simple platformer game during the second annual Go Godot jam and shared it with my capstone team suggesting that we remake and improve it in Unity. I wanted to finish the gameplay loop that had been prototyped during that jam.</p>

<!-- Courtesy of embedresponsively.com //-->

<div class="responsive-video-container">
    <iframe src="https://www.youtube-nocookie.com/embed/qbkzEemPbv0" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
  </div>

<h1 id="concept">Concept</h1>

<p>The gameplay concept was an action platformer centered on spellcasting and magic. The player would control one of 5 elements and fight elemental enemies. Enemies drop mana when they are defeated, which the player uses to collect elemental mana to fuel spells. All elements use a shared supply of mana, but the player can only collect mana matching their current element. The original jam entry was missing a number of key features: it only had one level, no sound, there were no win/lose conditions implemented, and no enemy pathfinding.</p>

<p>The project objectives were to:</p>

<ol>
  <li>Reimplement the game in Unity</li>
  <li>Add the missing game features</li>
  <li>Expand and improve the game mechanics</li>
</ol>

<h1 id="technical-highlights">Technical Highlights</h1>

<p>This project was based on a previous project, my portfolio fighting platformer. The complexity of the combat system was reduced slightly to accommodate the ability of the other more junior programmers; but the core architecture was brought over. A key architectural design decision was to separate Monobehaviours into two categories: systems and data. The data components would not contain any (or very limited) methods or functionality.</p>

<h2 id="shared-data-component-pattern">Shared Data Component Pattern</h2>

<div class="feature__wrapper">

  
    <div class="feature__item--left">
      <div class="archive__item">
        
          <div class="archive__item-teaser">
            <img src="/assets/images/elementals/character-movement-system-diagram.png" alt="" />
            
          </div>
        

        <div class="archive__item-body">
          

          
            <div class="archive__item-excerpt">
              <p>A key architectural design decision was to separate Monobehaviours into two categories: systems and data. The data components would not contain any (or very limited) methods or functionality. The diagram shows how the character movement system was implemented using this shared data component pattern.</p>

            </div>
          

          
            <p><a href="/assets/images/elementals/character-movement-system-diagram.png" class="btn btn--primary">View Diagram</a></p>
          
        </div>
      </div>
    </div>
  

</div>

<p>The diagram shows how the character movement system was implemented using this shared data component pattern. The yellow class, <code class="language-plaintext highlighter-rouge">CharacterState</code> (MonoBehaviour) is the data container component. In this example it also has two subcontainers (regular classes) for specific sets of data. Specifically the data holding the desired movement state (Input) and the data holding the actual movement state. The blue classes (MonoBehaviour) are systems that either read and/or write to data held by the <code class="language-plaintext highlighter-rouge">CharacterState</code> component.<br />
There are several valuable points to notice about this diagram. First, none of the blue systems classes reference each other at all. <code class="language-plaintext highlighter-rouge">CharacterMove</code> only needs to know that the input data exists, it doesn’t know or care how it is being updated.<br />
Secondly, it’s important to realize that each data element is only written from one class within a system. I added notes to the movement state so it would be clear that reads and writes are not in conflict with each other between the <code class="language-plaintext highlighter-rouge">CharacterAnimator</code> and the <code class="language-plaintext highlighter-rouge">CharacterMove</code>. <code class="language-plaintext highlighter-rouge">CharacterAnimator</code> only writes to certain data that <code class="language-plaintext highlighter-rouge">CharacterMove</code> reads from.  The data that character movement writes to, is read-only for the animator. You can see this in the code snippet below showing the animator’s update function. This rule makes this system easy to understand and debug because there is always a single point of authorship for any piece of data.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">void</span> <span class="nf">Update</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">//animator reads only from character movement state </span>
    <span class="kt">var</span> <span class="n">moving</span> <span class="p">=</span> <span class="n">Mathf</span><span class="p">.</span><span class="nf">Abs</span><span class="p">(</span><span class="n">_state</span><span class="p">.</span><span class="n">Movement</span><span class="p">.</span><span class="n">Velocity</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0.1f</span><span class="p">;</span>
    <span class="n">_anim</span><span class="p">.</span><span class="nf">SetBool</span><span class="p">(</span><span class="n">Moving</span><span class="p">,</span> <span class="n">moving</span><span class="p">);</span>
    <span class="n">_anim</span><span class="p">.</span><span class="nf">SetBool</span><span class="p">(</span><span class="n">Grounded</span><span class="p">,</span> <span class="n">_state</span><span class="p">.</span><span class="n">Movement</span><span class="p">.</span><span class="n">IsGrounded</span><span class="p">);</span>
    
    <span class="c1">//animator writes to interacting state from the animation machine parameters </span>
    <span class="n">_state</span><span class="p">.</span><span class="n">IsInteracting</span> <span class="p">=</span> <span class="n">_anim</span><span class="p">.</span><span class="nf">GetBool</span><span class="p">(</span><span class="n">IsInteracting</span><span class="p">);</span>
    <span class="n">_state</span><span class="p">.</span><span class="n">PhysicsMode</span> <span class="p">=</span> <span class="p">(</span><span class="n">InteractionPhysicsMode</span><span class="p">)</span><span class="n">_anim</span><span class="p">.</span><span class="nf">GetInteger</span><span class="p">(</span><span class="n">InteractionPhysMode</span><span class="p">);</span>
</code></pre></div></div>

<p>Additionally the <code class="language-plaintext highlighter-rouge">CharacterAnimator</code> writes to data inside its <code class="language-plaintext highlighter-rouge">OnAnimatorMove()</code> function to store root motion information. It’s important that the animator does not apply the root motion directly, because that would mean velocity is being authored in two places.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">void</span> <span class="nf">OnAnimatorMove</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">deltaPosition</span> <span class="p">=</span> <span class="n">_anim</span><span class="p">.</span><span class="n">deltaPosition</span><span class="p">;</span>
    <span class="n">_state</span><span class="p">.</span><span class="n">Movement</span><span class="p">.</span><span class="n">AnimatorDelta</span> <span class="p">=</span> <span class="n">deltaPosition</span><span class="p">;</span>
    <span class="n">_state</span><span class="p">.</span><span class="n">Movement</span><span class="p">.</span><span class="n">AnimatorAccel</span> <span class="p">=</span> <span class="n">deltaPosition</span> <span class="p">/</span> <span class="n">Time</span><span class="p">.</span><span class="n">deltaTime</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">CharacterMove FixedUpdate()</code> method showing how the movement system’s behavior is controlled by the data written by the animator. This allows the animator to take control of the character’s movement during important animations like spell casting.</p>

<div class="language-cs highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Based on Physics Updates</span>
<span class="k">private</span> <span class="k">void</span> <span class="nf">FixedUpdate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">void</span> <span class="nf">CompensateForMovingPlatforms</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">State</span><span class="p">.</span><span class="n">MovingGround</span><span class="p">.</span><span class="n">Count</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Vector2</span> <span class="n">velocity</span> <span class="p">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">State</span><span class="p">.</span><span class="n">MovingGround</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
            <span class="p">{</span>
                <span class="n">velocity</span> <span class="p">+=</span> <span class="n">State</span><span class="p">.</span><span class="n">MovingGround</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">Velocity</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="n">_rb</span><span class="p">.</span><span class="n">velocity</span> <span class="p">=</span> <span class="n">velocity</span> <span class="p">+</span> <span class="n">_rb</span><span class="p">.</span><span class="n">velocity</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">if</span><span class="p">(!</span><span class="n">IsJumping</span> <span class="p">&amp;&amp;</span> <span class="n">IsGrounded</span><span class="p">)</span>
        <span class="nf">CompensateForMovingPlatforms</span><span class="p">();</span>
    
    <span class="c1">//if not playing animation do normal movement</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">_state</span><span class="p">.</span><span class="n">IsInteracting</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">NormalMovementFixed</span><span class="p">();</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="c1">//if playing animation perform movement based on interaction physics mode</span>
    <span class="kt">var</span> <span class="n">rootMotionAccel</span> <span class="p">=</span> <span class="n">State</span><span class="p">.</span><span class="n">Movement</span><span class="p">.</span><span class="n">AnimatorAccel</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="n">_state</span><span class="p">.</span><span class="n">PhysicsMode</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">case</span> <span class="n">InteractionPhysicsMode</span><span class="p">.</span><span class="n">FullRootMotion</span><span class="p">:</span>
            <span class="n">_rb</span><span class="p">.</span><span class="n">velocity</span> <span class="p">+=</span> <span class="n">rootMotionAccel</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">InteractionPhysicsMode</span><span class="p">.</span><span class="n">Mixed</span><span class="p">:</span>
            <span class="n">_rb</span><span class="p">.</span><span class="n">velocity</span> <span class="p">+=</span> <span class="n">rootMotionAccel</span> <span class="p">+</span> <span class="p">(</span><span class="n">Physics2D</span><span class="p">.</span><span class="n">gravity</span> <span class="p">*</span> <span class="n">Time</span><span class="p">.</span><span class="n">fixedDeltaTime</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="n">InteractionPhysicsMode</span><span class="p">.</span><span class="n">FullPhysics</span><span class="p">:</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The advantages of the systems described above are really that they are extremely flexible.  Any system can be removed or replaced with no impact on any other systems. New functionality can be integrated into the system with relative ease. For example the movement logic could be replaced with a full state machine implementation without needing to change any animator code or input code. The input can be replaced with an AI decision maker with absolutely no changes to the rest of the systems. This loose coupling made it much easier for the less experienced programmers to be able to dive into specific systems without needing to worry about all the extraneous logic and data required by every system in the controller.</p>

<h1 id="challenges-and-solutions">Challenges and Solutions</h1>

<p>Bridging the skill gap between myself and the other two programmers was not an easy task. I had to implement most of the primary systems myself, but I wanted the other two CS students to get opportunities to learn and contribute to the project. Students were assigned to groups based on skill level, attempting to achieve a balance of advanced and beginner skill levels on each team. Initially our group was assigned with four members. I was assigned as one of the advanced members along with another programmer, leaving two remaining beginner students.  Unfortunately, the other advanced programmer left our team leaving me as the only advanced programmer on the team. Having never worked on a project of this scale, it was a significant challenge making the work accessible to all team members without taking them completely out of the programming tasks. I had to find a solution that would allow me to implement the more sophisticated systems without those systems interfering with and overwhelming the junior programmers.</p>

<p>Implementing the loose coupling described above allowed me to give the junior programmers systems to implement without them needing to concern themselves with the complex ramifications of the related systems. However, we still had to rely on some peer programming where I could coach them for some of the problems, especially at the very beginning. I tried to find as many avenues for the other programmers to contribute and develop the project beyond programming directly. I had to record a number of tutorials for team members to reference as well when working on various tasks. By the end of the project, each person had contributed at least one level that they had authored completely themselves and contributed numerous prefabs to the project, as well as contributing various amounts of code.</p>

<h1 id="conclusion">Conclusion</h1>

<p>This was my first taste of real project management. Before this, and some after as well, most projects had either been personal with no real deadlines or I was not in charge of leading and organizing the project. It was definitely taxing for me at the time, because I had to spend a lot of time working out ways for the inexperienced programmers to learn and be part of the project. At the end of the project I was slightly disappointed that I hadn’t gotten as much time to really experiment and iterate on the game mechanics. However, coming back to now I’ve already made some additions and improvements. Opening up after two years, I found the project quite easy to work with and easy to extend which is a testament to the overall quality and dedication to clean code.</p>

        
      </section>

      <footer class="page__meta">
        
        


        


      </footer>

      

      
  <nav class="pagination">
    
      <a href="/portfolio/dreamwalker/" class="pagination--pager" title="Dreamwalker
">Previous</a>
    
    
      <a href="/portfolio/steam-eagles/" class="pagination--pager" title="Steam Eagles
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Max Harris. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
